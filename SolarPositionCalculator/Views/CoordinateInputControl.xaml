<UserControl x:Class="SolarPositionCalculator.Views.CoordinateInputControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="200" d:DesignWidth="300">
    
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>
    <Border BorderBrush="LightGray" BorderThickness="1" CornerRadius="5" Padding="10">
        <StackPanel>
            <TextBlock Text="Geographic Coordinates" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
            
            <!-- Latitude Input -->
            <Grid Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="30"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Column="0" Grid.Row="0" Text="Latitude:" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Grid.Row="0"
                         Name="LatitudeTextBox"
                         Text="{Binding Latitude, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                         ToolTip="Enter latitude in decimal degrees (-90 to +90)"
                         Margin="5,0"/>
                <TextBlock Grid.Column="2" Grid.Row="0" Text="°" VerticalAlignment="Center"/>
                
                <!-- Latitude Error Message -->
                <TextBlock Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2"
                           Text="{Binding LatitudeError}"
                           Foreground="Red"
                           FontSize="11"
                           TextWrapping="Wrap"
                           Margin="5,2,0,0">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding LatitudeError}" Value="">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding LatitudeError}" Value="{x:Null}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </Grid>
            
            <!-- Longitude Input -->
            <Grid Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="30"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Column="0" Grid.Row="0" Text="Longitude:" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Grid.Row="0"
                         Name="LongitudeTextBox"
                         Text="{Binding Longitude, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                         ToolTip="Enter longitude in decimal degrees (-180 to +180)"
                         Margin="5,0"/>
                <TextBlock Grid.Column="2" Grid.Row="0" Text="°" VerticalAlignment="Center"/>
                
                <!-- Longitude Error Message -->
                <TextBlock Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2"
                           Text="{Binding LongitudeError}"
                           Foreground="Red"
                           FontSize="11"
                           TextWrapping="Wrap"
                           Margin="5,2,0,0">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding LongitudeError}" Value="">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding LongitudeError}" Value="{x:Null}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </Grid>
            
            <!-- Coordinate Format -->
            <Grid Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="Format:" VerticalAlignment="Center"/>
                <ComboBox Grid.Column="1" 
                          SelectedItem="{Binding CoordinateFormat}"
                          Margin="5,0">
                    <ComboBoxItem Content="Decimal Degrees"/>
                    <ComboBoxItem Content="Degrees Minutes Seconds"/>
                </ComboBox>
            </Grid>
            
            <!-- Formatted Coordinates Display -->
            <TextBlock Text="{Binding FormattedCoordinates}" 
                       FontStyle="Italic" 
                       Foreground="DarkBlue"
                       Margin="0,5,0,0"
                       TextWrapping="Wrap"/>
            
            <!-- Validation Status -->
            <TextBlock Text="✓ Valid coordinates" 
                       Foreground="Green" 
                       FontSize="12"
                       Margin="0,5,0,0">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding HasValidationErrors}" Value="True">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            
            <!-- Validation Warnings -->
            <TextBlock Text="{Binding ValidationWarnings}"
                       Foreground="Orange"
                       FontSize="11"
                       TextWrapping="Wrap"
                       Margin="0,5,0,0">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ValidationWarnings}" Value="">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ValidationWarnings}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            
            <!-- Edge Case Messages -->
            <TextBlock Text="{Binding EdgeCaseMessage}"
                       Foreground="Blue"
                       FontSize="11"
                       TextWrapping="Wrap"
                       Margin="0,5,0,0">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding EdgeCaseMessage}" Value="">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding EdgeCaseMessage}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </StackPanel>
    </Border>
</UserControl>